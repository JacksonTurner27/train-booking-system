{"ast":null,"code":"var _jsxFileName = \"/Users/jacksonturner/Desktop/train-app/fe/src/components/Report.jsx\";\nimport React, { Component } from 'react';\nimport \"../styles/report.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Report extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bookings: []\n    };\n  }\n\n  async componentDidMount() {\n    await fetch(\"/bookings\").then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n    }).then(jsonRes => this.setState({\n      bookings: jsonRes\n    }));\n    var bookings = this.groupByArray(this.state.bookings, \"combinedDate\");\n    this.setState({\n      bookings: bookings\n    });\n  }\n\n  groupByArray(xs, key) {\n    return xs.reduce(function (rv, x) {\n      let v = key instanceof Function ? key(x) : x[key];\n      let el = rv.find(r => r && r.key === v);\n\n      if (el) {\n        el.values.push(x);\n      } else {\n        rv.push({\n          key: v,\n          values: [x]\n        });\n      }\n\n      return rv;\n    }, []);\n  }\n\n  getWord(length) {\n    return length > 1 ? \"are\" : \"is\";\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mainReport\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"welcome\",\n        children: \"Report\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this), this.state.bookings.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => {\n          console.log(book);\n        },\n        className: \"jumbotron\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"There \", this.getWord(book.values && book.values.length), \" \", book && book.values && book.values.length, \" train bookings on \", book && book.values && book.values[0].train, \" today at \", book && book.values && book.values[0].hours + \":\" + book.values[0].minutes, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Train Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"From\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"To\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Train Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Seats Booked\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Seats Remaining\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: book && book.values && book.values[0].train\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: book && book.values && book.values[0].station\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: book && book.values && book.values[0].returnStation\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: book && book.values && book.values[0].hours + \":\" + book.values[0].minutes\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: book && book.values && book.values.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: book && book.values && 120 - book.values.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Report;","map":{"version":3,"sources":["/Users/jacksonturner/Desktop/train-app/fe/src/components/Report.jsx"],"names":["React","Component","Report","constructor","props","state","bookings","componentDidMount","fetch","then","res","ok","json","jsonRes","setState","groupByArray","xs","key","reduce","rv","x","v","Function","el","find","r","values","push","getWord","length","render","map","book","console","log","train","hours","minutes","station","returnStation"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport \"../styles/report.css\";\n\n\nclass Report extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            bookings: []\n        }\n    }\n\n    async componentDidMount() {\n        await fetch(\"/bookings\").then(res => {\n            if(res.ok) {\n                return res.json();\n            }\n        }).then(jsonRes => this.setState({ bookings: jsonRes}));\n\n        var bookings = this.groupByArray(this.state.bookings, \"combinedDate\");\n\n        this.setState({ bookings: bookings })\n    }\n\n\n    groupByArray(xs, key) { \n        return xs.reduce(function (rv, x) {\n            let v = key instanceof Function ? key(x) : x[key]; \n            let el = rv.find((r) => r && r.key === v); \n            if (el) { el.values.push(x); } \n            else { rv.push({ key: v, values: [x] });\n        } \n        return rv; }, []); \n    } \n\n    getWord(length) {\n        return length > 1 ? \"are\" : \"is\";\n    }\n\n    render() { \n        return (\n            <div className=\"mainReport\">\n                <h4 className=\"welcome\">Report</h4>\n                {this.state.bookings.map(book => \n                    <div onClick={() => { console.log(book) }} className=\"jumbotron\">\n                        <h3>There {this.getWord(book.values && book.values.length)} { book && book.values && book.values.length } train bookings on { book && book.values && book.values[0].train } today at { book && book.values && book.values[0].hours + \":\" + book.values[0].minutes}:</h3>\n                        <table className=\"table\">\n                            <thead>\n                                <th>Train Name</th>\n                                <th>From</th>\n                                <th>To</th>\n                                <th>Train Time</th>\n                                <th>Seats Booked</th>\n                                <th>Seats Remaining</th>\n                            </thead>\n                            <tbody>\n                                <tr>\n                                    <td>{book && book.values && book.values[0].train}</td>\n                                    <td>{book && book.values && book.values[0].station}</td>\n                                    <td>{book && book.values && book.values[0].returnStation}</td>\n                                    <td>{book && book.values && book.values[0].hours + \":\" + book.values[0].minutes}</td>\n                                    <td>{book && book.values && book.values.length}</td>\n                                    <td>{book && book.values && 120 - book.values.length}</td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                )}\n            </div>\n            \n        );\n    }\n}\n \nexport default Report;"]},"metadata":{},"sourceType":"module"}